<div class="dashboard-container">

  <!-- HEADER -->
  <header class="dashboard-header">
    <h2>Farmhouse Finance Dashboard</h2>
    <p>Track income and expenses per farmhouse</p>
  </header>

  <!-- FARMHOUSE SELECT -->
  <div class="selector-card">
    <label>Select Farmhouse</label>

    <select
      [(ngModel)]="selectedProperty"
      (change)="onPropertyChange()">

      <option value="" default>
        -- Choose a Farmhouse --
      </option>

      <option *ngFor="let p of properties" [value]="p.id">
        {{ p.name }}
      </option>

    </select>
  </div>

  <!-- MESSAGE BEFORE SELECTION -->
  <div *ngIf="!selectedProperty" class="empty-state">
    Please select a farmhouse to view financial data.
  </div>

  <!-- DASHBOARD (ONLY AFTER SELECTION) -->
  <div class="dashboard-layout" *ngIf="selectedProperty">

    <!-- LEFT SIDE -->
    <div class="dashboard-left">

      <div class="farmhouse-title">
        <h1>{{ selectedPropertyName }}</h1>
        <span class="badge">Active</span>
      </div>

      <!-- SUMMARY -->
      <div class="summary-cards">
        <div class="card income">
          <p>Total Income</p>
          <h3>₹ {{ totalIncome }}</h3>
        </div>

        <div class="card expense">
          <p>Total Expense</p>
          <h3>₹ {{ totalExpense }}</h3>
        </div>

        <div class="card profit" [class.loss]="profit < 0">
          <p>Net Profit</p>
          <h3>₹ {{ profit }}</h3>
        </div>
      </div>

      <!-- TABLES -->
      <div class="card">
        <h3 class="income-title">Income</h3>
        <app-transaction-list
          [propertyId]="selectedProperty"
          type="income"
          (totalsChange)="updateTotals($event)">
        </app-transaction-list>
      </div>

      <div class="card">
        <h3 class="expense-title">Expenses</h3>
        <app-transaction-list
          [propertyId]="selectedProperty"
          type="expense"
          (totalsChange)="updateTotals($event)">
        </app-transaction-list>
      </div>

    </div>

    <!-- RIGHT SIDE -->
    <div class="dashboard-right">
      <div class="card sticky-form">
        <h3>Add Transaction</h3>
        <app-transaction-form
          [propertyId]="selectedProperty">
        </app-transaction-form>
      </div>
    </div>

  </div>

</div>
